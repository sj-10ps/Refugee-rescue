{% extends 'admin_header.html' %}
{% block admin %}

<div class="container mt-4">
  <h2 class="text-primary mb-4">Organisations Approval Requests</h2>
  
  <div class="table-responsive">
    <table class="table table-bordered table-hover align-middle">
      <thead class="table-dark">
        <tr>
          <th>Organisation</th>
          <th>District</th>
          <th>Sub-district</th>
          <th>Post</th>
          <th>Postal Code</th>
          <th>Licence</th>
          <th>Licence Image</th>
          <th>Landmark</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for i in org %}
        <tr>
          <td>{{ i.name }}</td>
          <td>{{ i.district }}</td>
          <td>{{ i.sub_district }}</td>
          <td>{{ i.post }}</td>
          <td>{{ i.postal_code }}</td>
          <td>{{ i.licence }}</td>
          <td><a href="{{ i.licence_image.url }}" target="_blank" class="btn btn-sm btn-outline-primary">View</a></td>
          <td>{{ i.landmark }}</td>
          <td><a href="mailto:{{ i.email }}">{{ i.email }}</a></td>
          <td><a href="tel:{{ i.phone }}">{{ i.phone }}</a></td>
          <td>
            <a href="{% url 'approve_organisation' id=i.id login=i.login.id %}" class="btn btn-success btn-sm mb-1">Approve</a>
            <a href="{% url 'reject_organisation' id=i.id login=i.login.id %}" class="btn btn-danger btn-sm">Reject</a>
          </td>
        </tr>
        {% empty %}
        <tr><td colspan="11" class="text-center text-muted">No pending requests.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Approved Organisations -->
  <h2 class="text-success mt-5">Approved Organisations</h2>
  <div class="table-responsive">
    <table class="table table-striped table-bordered align-middle">
      <thead class="table-success">
        <tr>
          <th>Organisation</th>
          <th>District</th>
          <th>Sub-district</th>
          <th>Post</th>
          <th>Postal Code</th>
          <th>Licence</th>
          <th>Licence Image</th>
          <th>Landmark</th>
          <th>Email</th>
          <th>Phone</th>
        </tr>
      </thead>
      <tbody>
        {% for i in approved %}
        <tr>
          <td>{{ i.name }}</td>
          <td>{{ i.district }}</td>
          <td>{{ i.sub_district }}</td>
          <td>{{ i.post }}</td>
          <td>{{ i.postal_code }}</td>
          <td>{{ i.licence }}</td>
          <td><a href="{{ i.licence_image.url }}" target="_blank" class="btn btn-sm btn-outline-primary">View</a></td>
          <td>{{ i.landmark }}</td>
          <td><a href="mailto:{{ i.email }}">{{ i.email }}</a></td>
          <td><a href="tel:{{ i.phone }}">{{ i.phone }}</a></td>
        </tr>
        {% empty %}
        <tr><td colspan="10" class="text-center text-muted">No approved organisations.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Rejected Organisations -->
  <h2 class="text-danger mt-5">Rejected Organisations</h2>
  <div class="table-responsive">
    <table class="table table-striped table-bordered align-middle">
      <thead class="table-danger">
        <tr>
          <th>Organisation</th>
          <th>District</th>
          <th>Sub-district</th>
          <th>Post</th>
          <th>Postal Code</th>
          <th>Licence</th>
          <th>Licence Image</th>
          <th>Landmark</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for i in rejected %}
        <tr>
          <td>{{ i.name }}</td>
          <td>{{ i.district }}</td>
          <td>{{ i.sub_district }}</td>
          <td>{{ i.post }}</td>
          <td>{{ i.postal_code }}</td>
          <td>{{ i.licence }}</td>
          <td><a href="{{ i.licence_image.url }}" target="_blank" class="btn btn-sm btn-outline-primary">View</a></td>
          <td>{{ i.landmark }}</td>
          <td><a href="mailto:{{ i.email }}">{{ i.email }}</a></td>
          <td><a href="tel:{{ i.phone }}">{{ i.phone }}</a></td>
          <td>
            <a href="{% url 'delete_organisation' id=i.id login=i.login.id %}" class="btn btn-outline-danger btn-sm">Delete</a>
          </td>
        </tr>
        {% empty %}
        <tr><td colspan="11" class="text-center text-muted">No rejected organisations.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
