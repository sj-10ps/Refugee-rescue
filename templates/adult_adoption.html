{% extends 'ke_header.html' %}
{% block ke %}
{% load static %}

<div class="container mt-5">

  {% if adopt_data %}
  <!-- Organisation Details -->
  <h2 class="text-center mb-4">Organisation Details</h2>
  <table class="table table-bordered table-striped">
    <tr><th>Organisation Name</th><td>{{ adopt_data.name }}</td></tr>
    <tr><th>District</th><td>{{ adopt_data.district }}</td></tr>
    <tr><th>Sub-District</th><td>{{ adopt_data.sub_district }}</td></tr>
    <tr><th>Post Office</th><td>{{ adopt_data.post }}</td></tr>
    <tr><th>Landmark</th><td>{{ adopt_data.landmark }}</td></tr>
  </table>

  {% else %}
  <!-- Refugee Profiles -->
  <h2 class="text-center mb-4">Available for Adoption</h2>
  <div class="row row-cols-1 row-cols-md-2 g-4">
    {% for i in data %}
    <div class="col">
      <div class="card h-100 shadow-sm">
        <img src="{{ i.image.url }}" class="card-img-top" alt="{{ i.first_name }}" style="height: 300px; object-fit: cover;">
        <div class="card-body">
          <h5 class="card-title">{{ i.first_name }} {{ i.last_name }}</h5>
          <p class="card-text">
            <strong>Age:</strong> {{ i.age }}<br>
            <strong>Gender:</strong> {{ i.gender }}
          </p>
          <div class="d-grid gap-2">
            <a href="{% url 'adult_adopt_confirm' id=i.id %}" class="btn btn-success">Adopt</a>
            <a href="tel:{{ i.adopted_by.phone }}" class="btn btn-outline-primary">Call Us</a>
            <a href="{% url 'adopt_org_details' org_id=i.adopted_by.id %}" class="btn btn-outline-secondary">Organisation Details</a>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <!-- Adoption Requests -->
  <h2 class="text-center mt-5 mb-4">My Adoption Requests</h2>
  <div class="row row-cols-1 row-cols-md-2 g-4">
    {% for i in requests %}
    <div class="col">
      <div class="card h-100 border-info">
        <img src="{{ i.person.image.url }}" class="card-img-top" alt="{{ i.person.first_name }}" style="height: 300px; object-fit: cover;">
        <div class="card-body">
          <h5 class="card-title">{{ i.person.first_name }} {{ i.person.last_name }}</h5>
          <p class="card-text">
            <strong>Age:</strong> {{ i.person.age }}<br>
            <strong>Gender:</strong> {{ i.person.gender }}<br>
            <strong>Date of Request:</strong> {{ i.date }}<br>
            <strong>Status:</strong> {{ i.status }}<br>
            <strong>Approved On:</strong> {{ i.adopted_date }}
          </p>
          <div class="d-grid gap-2">
            <a href="tel:{{ i.adopted_by.phone }}" class="btn btn-outline-primary">Call Organisation</a>
            <a href="{% url 'adopt_org_details' org_id=i.person.adopted_by.id %}" class="btn btn-outline-secondary">Organisation Details</a>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

</div>
{% endblock %}
